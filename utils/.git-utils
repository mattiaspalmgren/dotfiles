# Functions for interfacing with git conviniently

# Based on examples in: 'https://gist.github.com/junegunn/f4fca918e937e6bf5bad'
git-browse() {
    local g=(
        git log
        --format='%C(auto)%h %s'
        --color=always
        "$@"
    )

    local fzf=(
        fzf
        --ansi
        --reverse
        --tiebreak=index
        --no-sort
        --bind=ctrl-s:toggle-sort
        --preview 'f() { set -- $(echo -- "$@" | grep -o "[a-f0-9]\{7\}"); [ $# -eq 0 ] || git show --color=always $1; }; f {}'
    )

    HASH=$($g | $fzf | awk '{print $1}')
    git show $HASH
}
